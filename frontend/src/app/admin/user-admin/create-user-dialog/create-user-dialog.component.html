<div class="p-fluid formgrid grid">
  <form #contactForm="ngForm" (ngSubmit)="addUser(contactForm)" novalidate>

    <!-- User Information Section -->
    <div class="col-12">
      <h4 class="text-lg font-semibold text-gray-800 mb-3 border-b border-gray-200 pb-2">
        <i class="pi pi-user mr-2 text-blue-600"></i>
        {{ 'userAdmin.userInformation' | translate }}
      </h4>
    </div>

    <!-- First Name Field -->
    <div class="col-12 md:col-6 field">
      <label for="givenname" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-user mr-2"></i>
        {{ 'userAdmin.firstName' | translate }}
      </label>
      <input
        pInputText
        id="givenname"
        name="givenname"
        #givenname="ngModel"
        [(ngModel)]="userForm.givenname"
        [placeholder]="'userAdmin.firstNamePlaceholder' | translate"
        required
        class="w-full"
        [class.ng-invalid]="givenname.invalid && (givenname.dirty || givenname.touched)"
      />
      <small *ngIf="givenname.invalid && (givenname.dirty || givenname.touched)" class="p-error block mt-1">
        {{ 'userAdmin.firstNameRequired' | translate }}
      </small>
    </div>

    <!-- Last Name Field -->
    <div class="col-12 md:col-6 field">
      <label for="familyname" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-user mr-2"></i>
        {{ 'userAdmin.lastName' | translate }}
      </label>
      <input
        pInputText
        id="familyname"
        name="familyname"
        #familyname="ngModel"
        [(ngModel)]="userForm.familyname"
        [placeholder]="'userAdmin.lastNamePlaceholder' | translate"
        required
        class="w-full"
        [class.ng-invalid]="familyname.invalid && (familyname.dirty || familyname.touched)"
      />
      <small *ngIf="familyname.invalid && (familyname.dirty || familyname.touched)" class="p-error block mt-1">
        {{ 'userAdmin.lastNameRequired' | translate }}
      </small>
    </div>

    <!-- Username Field -->
    <div class="col-12 field">
      <label for="username" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-at mr-2"></i>
        {{ 'userAdmin.username' | translate }}
      </label>
      <input
        pInputText
        id="username"
        name="username"
        #username="ngModel"
        [(ngModel)]="userForm.username"
        [placeholder]="'userAdmin.usernamePlaceholder' | translate"
        required
        class="w-full"
        [class.ng-invalid]="username.invalid && (username.dirty || username.touched)"
      />
      <small *ngIf="username.invalid && (username.dirty || username.touched)" class="p-error block mt-1">
        {{ 'userAdmin.usernameRequired' | translate }}
      </small>
    </div>

    <!-- Password Field -->
    <div class="col-12 field">
      <label for="password" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-key mr-2"></i>
        {{ 'userAdmin.password' | translate }}
      </label>
      <div class="flex align-items-center gap-2">
        <input
          pInputText
          id="password"
          name="password"
          type="text"
          [(ngModel)]="userForm.password"
          [placeholder]="'userAdmin.passwordPlaceholder' | translate"
          class="w-full"
        />
        <button pButton type="button" icon="pi pi-refresh" class="p-button-sm p-button-secondary" (click)="generatePassword()" [pTooltip]="'userAdmin.generatePassword' | translate"></button>
      </div>
    </div>

    <!-- Contact Information Section -->
    <div class="col-12">
      <h4 class="text-lg font-semibold text-gray-800 mb-3 border-b border-gray-200 pb-2">
        <i class="pi pi-phone mr-2 text-blue-600"></i>
        {{ 'userAdmin.contactInformation' | translate }}
      </h4>
    </div>

    <!-- Phone Field -->
    <div class="col-12 md:col-6 field">
      <label for="phone" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-phone mr-2"></i>
        {{ 'userAdmin.phone' | translate }}
      </label>
      <input
        pInputText
        id="phone"
        name="phone"
        [(ngModel)]="userForm.phone"
        [placeholder]="'userAdmin.phonePlaceholder' | translate"
        class="w-full"
      />
    </div>

    <!-- Email Field -->
    <div class="col-12 md:col-6 field">
      <label for="email" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-envelope mr-2"></i>
        {{ 'userAdmin.emailField' | translate }}
      </label>
      <input
        pInputText
        id="email"
        name="email"
        type="email"
        [(ngModel)]="userForm.email"
        [placeholder]="'userAdmin.emailPlaceholder' | translate"
        class="w-full"
      />
    </div>

    <!-- Organizer Section -->
    <div class="col-12">
      <h4 class="text-lg font-semibold text-gray-800 mb-3 border-b border-gray-200 pb-2">
        <i class="pi pi-users mr-2 text-blue-600"></i>
        {{ 'userAdmin.organizer' | translate }}
      </h4>
    </div>

    <!-- Organizer Field -->
    <div class="col-12 field">
      <label for="organizer_id" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-users mr-2"></i>
        {{ 'userAdmin.selectOrganizer' | translate }}
      </label>
      <brevet-organizer-selector
        [(ngModel)]="userForm.organizer_id"
        name="organizer_id"
        [placeholder]="'userAdmin.selectOrganizerOptional' | translate"
        [showPreview]="true"
        class="w-full">
      </brevet-organizer-selector>
      <small class="text-gray-500 block mt-1">
        {{ 'userAdmin.organizerDescription' | translate }}
        <span *ngIf="userForm.organizer_id" class="text-blue-600 font-medium">
          - Förvald arrangör baserat på din inloggning
        </span>
      </small>
    </div>

    <!-- Permissions Section -->
    <div class="col-12">
      <h4 class="text-lg font-semibold text-gray-800 mb-3 border-b border-gray-200 pb-2">
        <i class="pi pi-shield mr-2 text-blue-600"></i>
        {{ 'userAdmin.permissions' | translate }}
      </h4>
    </div>

    <!-- Permission Checkboxes -->
    <div class="col-12 field">
      <div class="grid">
        <div class="col-12 md:col-6 lg:col-4">
          <div class="flex align-items-center">
            <p-checkbox
              [(ngModel)]="userForm.superuser"
              name="superuser"
              inputId="superuser"
              [binary]="true">
            </p-checkbox>
            <label for="superuser" class="ml-2 font-medium">
              {{ 'userAdmin.superuser' | translate }}
            </label>
          </div>
          <small class="text-gray-500 block mt-1">
            {{ 'userAdmin.superuserDescription' | translate }}
          </small>
        </div>

        <div class="col-12 md:col-6 lg:col-4">
          <div class="flex align-items-center">
            <p-checkbox
              [(ngModel)]="userForm.admin"
              name="admin"
              inputId="admin"
              [binary]="true">
            </p-checkbox>
            <label for="admin" class="ml-2 font-medium">
              {{ 'userAdmin.admin' | translate }}
            </label>
          </div>
          <small class="text-gray-500 block mt-1">
            {{ 'userAdmin.adminDescription' | translate }}
          </small>
        </div>

        <div class="col-12 md:col-6 lg:col-4">
          <div class="flex align-items-center">
            <p-checkbox
              [(ngModel)]="userForm.user"
              name="user"
              inputId="user"
              [binary]="true">
            </p-checkbox>
            <label for="user" class="ml-2 font-medium">
              {{ 'userAdmin.user' | translate }}
            </label>
          </div>
          <small class="text-gray-500 block mt-1">
            {{ 'userAdmin.userDescription' | translate }}
          </small>
        </div>

        <div class="col-12 md:col-6 lg:col-4">
          <div class="flex align-items-center">
            <p-checkbox
              [(ngModel)]="userForm.volonteer"
              name="volonteer"
              inputId="volonteer"
              [binary]="true">
            </p-checkbox>
            <label for="volonteer" class="ml-2 font-medium">
              {{ 'userAdmin.volunteer' | translate }}
            </label>
          </div>
          <small class="text-gray-500 block mt-1">
            {{ 'userAdmin.volunteerDescription' | translate }}
          </small>
        </div>

        <div class="col-12 md:col-6 lg:col-4">
          <div class="flex align-items-center">
            <p-checkbox
              [(ngModel)]="userForm.developer"
              name="developer"
              inputId="developer"
              [binary]="true">
            </p-checkbox>
            <label for="developer" class="ml-2 font-medium">
              {{ 'userAdmin.developer' | translate }}
            </label>
          </div>
          <small class="text-gray-500 block mt-1">
            {{ 'userAdmin.developerDescription' | translate }}
          </small>
        </div>
      </div>
    </div>

    <!-- Footer Buttons -->
    <div class="col-12 flex justify-content-end gap-2 mt-4">
      <p-button
        icon="pi pi-times"
        [label]="'common.cancel' | translate"
        (click)="cancel()"
        severity="secondary"
        [text]="true">
      </p-button>
      <p-button
        icon="pi pi-check"
        [label]="'common.save' | translate"
        type="submit"
        [disabled]="!contactForm.valid">
      </p-button>
    </div>

  </form>
</div>



