<!--{{siteform |json}}-->
<div class="p-fluid formgrid grid">
  <form #eventFormName="ngForm" (ngSubmit)="addEvent(eventFormName)" novalidate>

    <!-- Place Field -->
    <div class="col-12 field">
      <label for="place" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-map-marker mr-2"></i>
        Plats
      </label>
      <input
        pInputText
        id="place"
        name="place"
        #place="ngModel"
        [(ngModel)]="siteform.place"
        placeholder="Ex: Broparken"
        required
        class="w-full"
        [class.ng-invalid]="place.invalid && (place.dirty || place.touched)"
      />
      <small *ngIf="place.invalid && (place.dirty || place.touched)" class="p-error block mt-1">
        Plats krävs
      </small>
    </div>

    <!-- Address Field -->
    <div class="col-12 field">
      <label for="adress" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-home mr-2"></i>
        Adress
      </label>
      <input
        pInputText
        id="adress"
        name="adress"
        #adress="ngModel"
        [(ngModel)]="siteform.adress"
        placeholder="Ex: Brogatan 1"
        required
        class="w-full"
        [class.ng-invalid]="adress.invalid && (adress.dirty || adress.touched)"
      />
      <small *ngIf="adress.invalid && (adress.dirty || adress.touched)" class="p-error block mt-1">
        Adress krävs
      </small>
    </div>

    <!-- Coordinates -->
    <div class="col-12 md:col-6 field">
      <label for="lat" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-globe mr-2"></i>
        Latitud
      </label>
      <input
        pInputText
        id="lat"
        name="lat"
        #lat="ngModel"
        [(ngModel)]="siteform.lat"
        placeholder="Ex: 59.3293"
        required
        class="w-full"
        [class.ng-invalid]="lat.invalid && (lat.dirty || lat.touched)"
      />
      <small *ngIf="lat.invalid && (lat.dirty || lat.touched)" class="p-error block mt-1">
        Latitud krävs
      </small>
    </div>

    <div class="col-12 md:col-6 field">
      <label for="lng" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-globe mr-2"></i>
        Longitud
      </label>
      <input
        pInputText
        id="lng"
        name="lng"
        #lng="ngModel"
        [(ngModel)]="siteform.lng"
        placeholder="Ex: 18.0686"
        required
        class="w-full"
        [class.ng-invalid]="lng.invalid && (lng.dirty || lng.touched)"
      />
      <small *ngIf="lng.invalid && (lng.dirty || lng.touched)" class="p-error block mt-1">
        Longitud krävs
      </small>
    </div>

    <!-- Check-in Distance -->
    <div class="col-12 md:col-6 field">
      <label for="check_in_distance" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-map-marker mr-2"></i>
        Incheckning avstånd (meter)
      </label>
      <input
        pInputText
        type="number"
        step="1"
        min="1"
        id="check_in_distance"
        name="check_in_distance"
        #check_in_distance="ngModel"
        [(ngModel)]="siteform.check_in_distance"
        placeholder="Ex: 900"
        required
        class="w-full"
        [class.ng-invalid]="check_in_distance.invalid && (check_in_distance.dirty || check_in_distance.touched)"
      />
      <small *ngIf="check_in_distance.invalid && (check_in_distance.dirty || check_in_distance.touched)" class="p-error block mt-1">
        Incheckning avstånd krävs (i meter)
      </small>
    </div>

    <!-- Description -->
    <div class="col-12 field">
      <label for="description" class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-file-edit mr-2"></i>
        Beskrivning
      </label>
      <textarea
        pInputTextarea
        id="description"
        [(ngModel)]="siteform.description"
        name="description"
        rows="4"
        autoResize="autoResize"
        placeholder="Beskrivning för platsen..."
        class="w-full">
      </textarea>
    </div>

    <!-- Current Image -->
    <div class="col-12 field" *ngIf="siteform.image">
      <label class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-image mr-2"></i>
        Nuvarande bild
      </label>
      <div class="flex align-items-center">
        <img
          width="70"
          height="70"
          class="border-round shadow-2"
          [src]="siteform.image"
          alt="Plats bild"
        />
      </div>
    </div>

    <!-- Image Upload -->
    <div class="col-12 field">
      <label class="block mb-2 font-medium text-gray-900">
        <i class="pi pi-upload mr-2"></i>
        Byt bild
      </label>
      <p-fileUpload
        #primeFileUploadw
        (onProgress)="progressReport($event)"
        name="myfile[]"
        customUpload="true"
        (uploadHandler)="myUploader($event)"
        accept="image/*"
        maxFileSize="1000000"
        class="w-full">
        <ng-template pTemplate="content">
          <ul *ngIf="uploadedFiles.length" class="mt-2">
            <li *ngFor="let file of uploadedFiles" class="text-sm text-gray-600">
              {{file.name}} - {{file.size}} bytes
            </li>
          </ul>
        </ng-template>
      </p-fileUpload>
    </div>

    <!-- Footer Buttons -->
    <div class="col-12 flex justify-content-end gap-2 mt-4">
      <p-button
        icon="pi pi-times"
        label="Avbryt"
        (click)="cancel()"
        severity="secondary"
        [text]="true">
      </p-button>
      <p-button
        icon="pi pi-check"
        label="Spara"
        type="submit"
        [disabled]="!eventFormName.valid">
      </p-button>
    </div>

  </form>
</div>







