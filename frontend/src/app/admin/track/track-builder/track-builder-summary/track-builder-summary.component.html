<p-card header="Arrangemang">
  <ng-container *ngIf="event">
    <h5>{{event.title}}</h5>
    {{event.startdate}} - {{event.enddate}}
  </ng-container>
</p-card>

<p-card header="Bana" styleClass="mt-0">
  <ng-container *ngIf="track">
    <div class="grid">
      <div class="col-5">
        <h4>{{track.TRACK_TITLE}}</h4>
      </div>
      <div class="col-7">
        <div class="grid">
          <div class="col-4">
            <strong>Distans:</strong> {{track.EVENT_DISTANCE_KM}}
          </div>
          <div class="col-4">
            <strong>Datum:</strong> {{track.START_DATE}}
          </div>
          <div class="col-4">
            <strong>Tid:</strong> {{track.START_TIME}}
          </div>
          <div class="col-12">
            <strong>Min/Max:</strong> {{track.MIN_TIME}}/{{track.MAX_TIME}}
          </div>
          <div class="col-12">
            <strong>Länk:</strong> {{track.LINK_TO_TRACK}}
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</p-card>

<p-card styleClass="mt-2">
  <ng-template pTemplate="header">
    <div class="flex justify-content-between align-items-center p-2">
      <span class="text-xl font-bold">Kontroller</span>
      <span class="text-sm text-primary">(Sorterade efter distans)</span>
    </div>
  </ng-template>

  <ng-container *ngIf="controls && controls.length > 0">
    <hr>
    <ng-container *ngFor="let control of controls; let i = index">
      <div class="mb-2 ">
        <div class="grid">
          <div class="col-1">
            <p-image width="60" height="60" src="{{control.siteRepresentation?.image}}" alt="Image" [preview]="false"></p-image>
          </div>
          <div class="col-11">
            <div class="grid">
              <div class="col-3">
                <strong>Kontroll #{{i+1}}:</strong> {{control.siteRepresentation?.adress}}
              </div>
              <div class="col-3">
                <strong>Distans:</strong> {{control.rusaControlRepresentation?.CONTROL_DISTANCE_KM}}km
              </div>
              <div class="col-3">
                <strong>Öppnar:</strong>  {{control.rusaControlRepresentation?.OPEN}}
              </div>
              <div class="col-3">
                <strong>Stänger:</strong>  {{control.rusaControlRepresentation?.CLOSE}}
              </div>
              <div class="col-3">
                {{control.rusaControlRepresentation?.RELATIVE_OPEN}} {{control.rusaControlRepresentation?.RELATIVE_CLOSE}}
              </div>
              <div class="col-9">
                <strong>Service:</strong> {{control.siteRepresentation?.description}}
              </div>
            </div>
            <div class="col-9">
            </div>
          </div>
        </div>
      </div>
      <hr>
    </ng-container>
  </ng-container>
</p-card>

<div class="flex justify-content-center mt-2">
  <p-button
    [disabled]="buttonDisabled || isLoading"
    label="{{isLoading ? 'Sparar...' : 'Spara bana'}}"
    (click)="createTrack()"
    icon="{{isLoading ? 'pi pi-spin pi-spinner' : ''}}"
    styleClass="p-button-sm p-button-success">
  </p-button>
</div>

