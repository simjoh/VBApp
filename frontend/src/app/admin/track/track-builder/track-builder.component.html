<div class="grid">
  <div class="col-12">
    <brevet-toast></brevet-toast>

    <!-- Track Building Options -->
    <ng-container *ngIf="(editMode$ | async) === false">
      <div class="building-options">
        <div class="option-card selected" (click)="setMode()">
          <div class="option-icon">
            <i class="pi pi-plus"></i>
          </div>
          <h3 class="option-title">Skapa nytt arrangemang</h3>
          <p class="option-description">Skapa ett helt nytt arrangemang i loppservice med kalenderpost</p>
        </div>

        <div class="option-card disabled">
          <div class="option-icon">
            <i class="pi pi-file"></i>
          </div>
          <h3 class="option-title">Bygg från GPX-fil</h3>
          <p class="option-description">Importera en GPX-fil för att automatiskt skapa bana och kontroller</p>
          <span class="upcoming-badge">Kommande funktion</span>
        </div>

        <div class="option-card disabled">
          <div class="option-icon">
            <i class="pi pi-copy"></i>
          </div>
          <h3 class="option-title">Kopiera befintlig bana</h3>
          <p class="option-description">Skapa en ny bana baserad på en befintlig bana</p>
          <span class="upcoming-badge">Kommande funktion</span>
        </div>
      </div>
    </ng-container>

    <!-- Building Form -->
    <ng-container *ngIf="(editMode$ | async) === true">
      <!-- Header -->
      <div class="flex align-items-center gap-3 mb-4">
        <button pButton
          icon="pi pi-arrow-left"
          label="Tillbaka"
          class="p-button-text"
          (click)="setMode()">
        </button>
        <div>
          <h2 class="text-900 m-0 mb-2">Skapa nytt arrangemang</h2>
          <p class="text-700 m-0">Fyll i informationen nedan för att skapa ditt arrangemang och bana</p>
        </div>
      </div>

      <!-- Form Content -->
      <div class="grid">
        <div class="col-12 lg:col-8">
          <!-- Basic Info -->
          <p-card styleClass="mb-4">
            <ng-template pTemplate="header">
              <div class="px-4 py-3 surface-section border-bottom-1 surface-border">
                <h3 class="text-900 m-0">Grundläggande information</h3>
              </div>
            </ng-template>
            <brevet-track-builder-track-info-form></brevet-track-builder-track-info-form>
          </p-card>

          <!-- Controls -->
          <p-card>
            <ng-template pTemplate="header">
              <div class="px-4 py-3 surface-section border-bottom-1 surface-border">
                <h3 class="text-900 m-0">Kontroller</h3>
              </div>
            </ng-template>
            <brevet-track-builder-controls-form></brevet-track-builder-controls-form>
          </p-card>
        </div>

        <!-- Summary -->
        <div class="col-12 lg:col-4">
          <p-card styleClass="sticky summary-card">
            <ng-template pTemplate="header">
              <div class="px-4 py-3 surface-section border-bottom-1 surface-border">
                <h3 class="text-900 m-0">Sammanfattning</h3>
              </div>
            </ng-template>
            <brevet-track-builder-summary></brevet-track-builder-summary>
          </p-card>
        </div>
      </div>
    </ng-container>
  </div>
</div>

