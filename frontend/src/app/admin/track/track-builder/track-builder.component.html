<div class="grid">
  <div class="col-12">
    <brevet-toast></brevet-toast>

    <!-- Track Building Options -->
    <ng-container *ngIf="(editMode$ | async) === false">
      <div class="building-options">
        <div class="option-card" [class.selected]="currentMode === 'create'" (click)="setMode('create')">
          <div class="option-icon">
            <i class="pi pi-plus"></i>
          </div>
          <h3 class="option-title">{{ 'trackBuilder.createNewEvent' | translate }}</h3>
          <p class="option-description">{{ 'trackBuilder.createNewEventDescription' | translate }}</p>
        </div>

        <div class="option-card" [class.disabled]="true" (click)="setMode('gpx')">
          <div class="option-icon">
            <i class="pi pi-file"></i>
          </div>
          <h3 class="option-title">{{ 'trackBuilder.buildFromGpx' | translate }}</h3>
          <p class="option-description">{{ 'trackBuilder.buildFromGpxDescription' | translate }}</p>
          <span class="upcoming-badge">{{ 'trackBuilder.upcomingFeature' | translate }}</span>
        </div>

        <div class="option-card" [class.disabled]="true" (click)="setMode('copy')">
          <div class="option-icon">
            <i class="pi pi-copy"></i>
          </div>
          <h3 class="option-title">{{ 'trackBuilder.copyExistingTrack' | translate }}</h3>
          <p class="option-description">{{ 'trackBuilder.copyExistingTrackDescription' | translate }}</p>
          <span class="upcoming-badge">{{ 'trackBuilder.upcomingFeature' | translate }}</span>
        </div>
      </div>
    </ng-container>

    <!-- Building Form -->
    <ng-container *ngIf="(editMode$ | async) === true">
      <!-- Header -->
      <div class="flex align-items-center gap-3 mb-4">
        <div>
          <h2 class="text-900 m-0 mb-2">{{ 'trackBuilder.fillInformation' | translate }}</h2>
          <p class="text-700 m-0">{{ 'trackBuilder.fillInformationDescription' | translate }}</p>
        </div>
      </div>

      <!-- Form Content -->
      <div class="grid">
        <div class="col-12 lg:col-8">
          <!-- Basic Info -->
          <p-card styleClass="mb-4">
            <ng-template pTemplate="header">
              <div class="px-4 py-3 surface-section border-bottom-1 surface-border">
                <h3 class="text-900 m-0">{{ 'trackInfo.basicInformation' | translate }}</h3>
              </div>
            </ng-template>
            <brevet-track-builder-track-info-form></brevet-track-builder-track-info-form>
          </p-card>

          <!-- Controls -->
          <p-card>
            <ng-template pTemplate="header">
              <div class="px-4 py-3 surface-section border-bottom-1 surface-border">
                <h3 class="text-900 m-0">{{ 'track.controls' | translate }}</h3>
              </div>
            </ng-template>
            <brevet-track-builder-controls-form></brevet-track-builder-controls-form>
          </p-card>
        </div>

        <!-- Summary -->
        <div class="col-12 lg:col-4">
          <p-card styleClass="sticky" style="top: 1rem;">
            <ng-template pTemplate="header">
              <div class="px-4 py-3 surface-section border-bottom-1 surface-border">
                <h3 class="text-900 m-0">{{ 'common.summary' | translate }}</h3>
              </div>
            </ng-template>
            <brevet-track-builder-summary></brevet-track-builder-summary>
          </p-card>
        </div>
      </div>
    </ng-container>
  </div>
</div>

