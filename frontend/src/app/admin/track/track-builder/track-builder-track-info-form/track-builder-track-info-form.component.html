<div class="track-info-form">
    <!-- Event Selection -->
  <div class="section">
    <h3 class="section-title">
      <i class="pi pi-calendar"></i>
      {{ 'trackInfo.eventGroup' | translate }}
    </h3>

            <div class="field-group">
      <label>{{ 'trackInfo.selectEventGroup' | translate }} <span class="required-asterisk">*</span></label>
      <brevet-event-selector (trackChange)="addEvent($event)"></brevet-event-selector>
    </div>
  </div>

  <!-- Organizer Details -->
  <div class="section">
    <h3 class="section-title">
      <i class="pi pi-users"></i>
      {{ 'trackInfo.organizer' | translate }}
    </h3>

    <div class="field-group">
      <label>{{ 'trackInfo.organizer' | translate }} <span class="required-asterisk">*</span></label>
      <brevet-organizer-selector
        (organizerChange)="onOrganizerChange($event)"
        (organizerObjectChange)="onOrganizerObjectChange($event)"
        [showPreview]="false"
        [placeholder]="'trackInfo.selectOrganizer' | translate"
        class="form-input">
      </brevet-organizer-selector>
    </div>
  </div>

  <!-- Basic Information -->
  <div class="section">
    <h3 class="section-title">
      <i class="pi pi-info-circle"></i>
      {{ 'trackInfo.basicInformation' | translate }}
    </h3>

    <div class="form-grid">
      <div class="field-group">
        <label>{{ 'trackInfo.eventName' | translate }} <span class="required-asterisk">*</span></label>
        <input
          (blur)="add()"
          (input)="onTrackNameChange()"
          [(ngModel)]="model.trackname"
          [pTooltip]="'trackInfo.eventNameTooltip' | translate"
          type="text"
          id="trackname"
          pInputText
          [placeholder]="'trackInfo.eventNamePlaceholder' | translate"
          class="form-input">
      </div>

      <div class="field-group">
        <label>{{ 'trackInfo.distance' | translate }} <span class="required-asterisk">*</span></label>
        <p-dropdown
          [options]="distanceOptions"
          [(ngModel)]="selectedDistance"
          (onChange)="onDistanceChange($event)"
          [placeholder]="'trackInfo.distancePlaceholder' | translate"
          [editable]="true"
          optionLabel="label"
          optionValue="value"
          class="form-input"
          [pTooltip]="'trackInfo.distanceTooltip' | translate">
        </p-dropdown>
      </div>
    </div>

    <div class="form-grid">
      <div class="field-group">
        <label>{{ 'trackInfo.eventType' | translate }} <span class='required-asterisk'>*</span></label>
        <p-dropdown
          [options]="eventTypeOptions"
          [(ngModel)]="selectedEventType"
          (onChange)="onEventTypeChange()"
          [placeholder]="'trackInfo.eventTypePlaceholder' | translate"
          optionLabel="label"
          optionValue="value"
          class="form-input"
          [pTooltip]="'trackInfo.eventTypeTooltip' | translate">
        </p-dropdown>
      </div>

      <div class="field-group">
        <label>{{ 'trackInfo.elevation' | translate }}</label>
        <input
          [(ngModel)]="model.elevation"
          (blur)="add()"
          (input)="onElevationChange()"
          type="number"
          min="0"
          max="99999"
          step="1"
          [placeholder]="'trackInfo.elevationPlaceholder' | translate"
          pInputText
          class="form-input"
          [pTooltip]="'trackInfo.elevationTooltip' | translate">
      </div>
    </div>

    <div class="form-grid">
      <div class="field-group">
        <label>{{ 'trackInfo.startDate' | translate }} <span class='required-asterisk'>*</span></label>
        <p-calendar
          [(ngModel)]="model.startdate"
          (onBlur)="add()"
          (onSelect)="onStartDateChange()"
          dateFormat="yy-mm-dd"
          [placeholder]="'trackInfo.startDatePlaceholder' | translate"
          showIcon="true"
          locale="sv"
          [pTooltip]="'trackInfo.startDateTooltip' | translate"
          class="form-input">
        </p-calendar>
      </div>

      <div class="field-group">
        <label>{{ 'trackInfo.startTime' | translate }} <span class='required-asterisk'>*</span></label>
        <p-calendar
          [(ngModel)]="model.starttime"
          (onBlur)="add()"
          (onSelect)="onStartTimeChange()"
          timeOnly="true"
          hourFormat="24"
          [placeholder]="'trackInfo.startTimePlaceholder' | translate"
          showIcon="true"
          [pTooltip]="'trackInfo.startTimeTooltip' | translate"
          class="form-input">
        </p-calendar>
      </div>
    </div>
  </div>

  <!-- Description -->
  <div class="section">
    <h3 class="section-title">
      <i class="pi pi-align-left"></i>
      {{ 'trackInfo.descriptionAndLinks' | translate }}
    </h3>

    <div class="field-group">
      <label>{{ 'trackInfo.description' | translate }}</label>
      <textarea
        [(ngModel)]="model.description"
        (blur)="add()"
        (input)="onDescriptionChange()"
        pInputText
        rows="3"
        [placeholder]="'trackInfo.descriptionPlaceholder' | translate"
        class="form-input">
      </textarea>
    </div>

    <div class="form-grid">
      <div class="field-group">
        <label>{{ 'trackInfo.startLocation' | translate }}</label>
        <input
          [(ngModel)]="model.startLocation"
          (blur)="add()"
          (input)="onStartLocationChange()"
          type="text"
          pInputText
          [placeholder]="'trackInfo.startLocationPlaceholder' | translate"
          class="form-input">
      </div>

      <div class="field-group">
        <label>{{ 'trackInfo.payment' | translate }}</label>
        <input
          [(ngModel)]="model.payment"
          (blur)="add()"
          (input)="onPaymentChange()"
          type="text"
          pInputText
          [placeholder]="'trackInfo.paymentPlaceholder' | translate"
          class="form-input">
      </div>
    </div>

    <div class="field-group">
      <label>{{ 'trackInfo.trackLink' | translate }}</label>
      <input
        (blur)="add()"
        (input)="onLinkChange()"
        [(ngModel)]="model.link"
        [pTooltip]="'trackInfo.trackLinkTooltip' | translate"
        type="url"
        id="linktostrava"
        pInputText
        [placeholder]="'trackInfo.trackLinkPlaceholder' | translate"
        class="form-input">
    </div>
  </div>

  <!-- Options -->
  <div class="section">
    <h3 class="section-title">
      <i class="pi pi-cog"></i>
      {{ 'trackInfo.settings' | translate }}
    </h3>

    <div class="field-group">
      <label>{{ 'trackInfo.maxParticipants' | translate }}</label>
      <input
        type="number"
        min="1"
        max="9999"
        step="1"
        [placeholder]="'100'"
        pInputText
        class="form-input"
        [pTooltip]="'trackInfo.maxParticipantsTooltip' | translate">
    </div>

    <div class="form-grid">
      <div class="field-group">
        <label>{{ 'trackInfo.registrationOpens' | translate }}</label>
        <p-calendar
          [(ngModel)]="model.registration_opens"
          (onSelect)="onRegistrationOpensChange()"
          (onBlur)="onRegistrationOpensChange()"
          dateFormat="yy-mm-dd"
          [showTime]="true"
          hourFormat="24"
          [placeholder]="'trackInfo.registrationOpensPlaceholder' | translate"
          showIcon="true"
          locale="sv"
          [pTooltip]="'trackInfo.registrationOpensTooltip' | translate"
          class="form-input">
        </p-calendar>
      </div>

      <div class="field-group">
        <label>{{ 'trackInfo.registrationCloses' | translate }}</label>
        <p-calendar
          [(ngModel)]="model.registration_closes"
          (onSelect)="onRegistrationClosesChange()"
          (onBlur)="onRegistrationClosesChange()"
          dateFormat="yy-mm-dd"
          [showTime]="true"
          hourFormat="24"
          [placeholder]="'trackInfo.registrationClosesPlaceholder' | translate"
          showIcon="true"
          locale="sv"
          [pTooltip]="'trackInfo.registrationClosesTooltip' | translate"
          class="form-input">
        </p-calendar>
      </div>
    </div>

    <div class="options-grid">
      <div class="option-item">
        <p-checkbox
          inputId="accept-stripe"
          [(ngModel)]="stripeEnabled"
          (onChange)="onStripeChange()"
          [binary]="true"
          [label]="'trackInfo.stripePayment' | translate">
        </p-checkbox>
        <span class="option-desc">{{ 'trackInfo.stripePaymentDesc' | translate }}</span>
      </div>

      <div class="option-item">
        <p-checkbox
          inputId="email-confirmation"
          value="email"
          [label]="'trackInfo.emailConfirmation' | translate">
        </p-checkbox>
        <span class="option-desc">{{ 'trackInfo.emailConfirmationDesc' | translate }}</span>
      </div>
    </div>
  </div>
</div>

