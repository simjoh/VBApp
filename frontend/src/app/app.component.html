<ng-container *ngIf="init$ | async as init">
  <ng-container *ngIf="($authenticated | async) === true">
    <main id="main" role="main" class="flex-shrink-0 mb-0">
<!--      Lägg in topbanner med info om vem som är inloggad språkval samt logga ut länk-->
<!--      <brevet-menu></brevet-menu>-->
      <!-- Admin Header - Only for Competitors -->
      <div class="admin-header" *ngIf="!(isAdminUser$ | async)">
        <brevet-menu></brevet-menu>
        <div class="header-controls">
          <app-flag-language-selector></app-flag-language-selector>
        </div>
      </div>

      <!-- Admin Layout -->
      <div class="admin-layout" [class.competitor-layout]="!(isAdminUser$ | async)">
        <!-- Sidebar Navigation - Only for Admin Users -->
        <div class="admin-sidebar" *ngIf="isAdminUser$ | async">
          <div class="sidebar-content">
            <div class="sidebar-header">
              <img src="./assets/ebrevet-prod.svg" height="50" width="60" class="sidebar-logo" alt="Ebrevet logotyp">
              <h3>{{ 'admin.dashboard' | translate }}</h3>
              <div class="sidebar-language-selector">
                <app-flag-language-selector></app-flag-language-selector>
              </div>
            </div>
            <nav class="sidebar-nav">
                  <a routerLink="/admin/brevet-admin-start" routerLinkActive="active" class="nav-item">
                    <i class="pi pi-home"></i>
                    <span>{{ 'dashboard.overview' | translate }}</span>
                  </a>
              <div class="nav-group">
                <div class="nav-group-header">
                  <i class="pi pi-users"></i>
                  <span>{{ 'nav.participants' | translate }}</span>
                </div>
                <div class="nav-group-items">
                  <a routerLink="/admin/participant" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item sub-item">
                    <i class="pi pi-list"></i>
                    <span>{{ 'nav.participantList' | translate }}</span>
                  </a>
                  <a routerLink="/admin/participant/brevet-participant-upload" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item sub-item">
                    <i class="pi pi-upload"></i>
                    <span>{{ 'nav.uploadParticipants' | translate }}</span>
                  </a>
                </div>
              </div>
              <div class="nav-group">
                <div class="nav-group-header">
                  <i class="pi pi-map"></i>
                  <span>{{ 'nav.tracks' | translate }}</span>
                </div>
                <div class="nav-group-items">
                  <a routerLink="/admin/banor" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item sub-item">
                    <i class="pi pi-list"></i>
                    <span>{{ 'nav.trackList' | translate }}</span>
                  </a>
                  <a routerLink="/admin/banor/brevet-track-builder" [queryParams]="{mode: 'create'}" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item sub-item">
                    <i class="pi pi-plus-circle"></i>
                    <span>{{ 'nav.createNewEvent' | translate }}</span>
                  </a>
                  <a routerLink="/admin/banor/brevet-track-builder" [queryParams]="{mode: 'gpx'}" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item sub-item coming-soon">
                    <i class="pi pi-file"></i>
                    <span>{{ 'nav.gpxImport' | translate }}</span>
                    <span class="coming-soon-badge">{{ 'comingSoon.badge' | translate }}</span>
                  </a>
                  <a routerLink="/admin/banor/brevet-track-builder" [queryParams]="{mode: 'copy'}" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item sub-item coming-soon">
                    <i class="pi pi-copy"></i>
                    <span>{{ 'nav.copyTrack' | translate }}</span>
                    <span class="coming-soon-badge">{{ 'comingSoon.badge' | translate }}</span>
                  </a>
                </div>
              </div>
                  <div class="nav-group">
                    <div class="nav-group-header">
                      <i class="pi pi-file-pdf"></i>
                      <span>{{ 'nav.reports' | translate }}</span>
                    </div>
                    <div class="nav-group-items">
                      <a routerLink="/admin/acp-rapport" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item sub-item">
                        <i class="pi pi-file-export"></i>
                        <span>{{ 'nav.reportToAcp' | translate }}</span>
                      </a>
                    </div>
                  </div>

                  <div class="nav-group">
                    <div class="nav-group-header">
                      <i class="pi pi-cog"></i>
                      <span>{{ 'nav.system' | translate }}</span>
                    </div>
                    <div class="nav-group-items">
                      <a routerLink="/admin/useradmin" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item sub-item">
                        <i class="pi pi-user"></i>
                        <span>{{ 'nav.users' | translate }}</span>
                      </a>
                      <a routerLink="/admin/eventadmin" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item sub-item">
                        <i class="pi pi-calendar"></i>
                        <span>{{ 'nav.events' | translate }}</span>
                      </a>
                      <a routerLink="/admin/clubadmin" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item sub-item">
                        <i class="pi pi-shield"></i>
                        <span>{{ 'nav.clubs' | translate }}</span>
                      </a>
                      <a routerLink="/admin/organizeradmin" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item sub-item">
                        <i class="pi pi-users"></i>
                        <span>{{ 'nav.organizers' | translate }}</span>
                      </a>
                      <a routerLink="/admin/siteadmin" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item sub-item">
                        <i class="pi pi-map-marker"></i>
                        <span>{{ 'nav.checkpoints' | translate }}</span>
                      </a>
                    </div>
                  </div>

              <!-- Logout Section -->
              <div class="sidebar-footer">
                <button (click)="logout()" class="logout-button">
                  <i class="pi pi-sign-out"></i>
                  <span>{{ 'nav.logout' | translate }}</span>
                </button>
              </div>
            </nav>
          </div>
        </div>

        <!-- Main Content Area -->
        <div class="admin-main" [class.full-width]="!(isAdminUser$ | async)">
          <div class="admin-content">
            <router-outlet></router-outlet>
          </div>
        </div>
      </div>
    </main>
  </ng-container>
  <ng-container *ngIf="($authenticated | async) === false">
   <brevet-login></brevet-login>
  </ng-container>
</ng-container>
<brevet-loader></brevet-loader>
<!--  Lägg in footer-->
<brevet-toast></brevet-toast>

