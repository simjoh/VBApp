<div class="admin-sidebar" [class.open]="sidebarOpen$ | async">
  <div class="sidebar-content">
    <div class="sidebar-header">
      <button class="sidebar-close-btn" (click)="closeSidebar()" *ngIf="(sidebarOpen$ | async)">
        <i class="pi pi-times"></i>
      </button>
      <img src="./assets/ebrevet-prod.svg" height="50" width="60" class="sidebar-logo" alt="Ebrevet logotyp">
      <h3>{{ 'admin.dashboard' | translate }}</h3>
      <div class="sidebar-language-selector">
        <app-flag-language-selector></app-flag-language-selector>
      </div>
    </div>
    <nav class="sidebar-nav">
      <ng-container *ngIf="menuItems$ | async as menuItems; else loadingTemplate">
        <ng-container *ngFor="let item of menuItems">
          <!-- Simple menu item with router link -->
          <a *ngIf="!hasChildren(item)"
             [routerLink]="item.routerLink"
             routerLinkActive="active"
             class="nav-item"
             (click)="closeSidebar()">
            <i [class]="item.icon"></i>
            <span>{{ item.label | translate }}</span>
          </a>

          <!-- Menu group with children -->
          <div *ngIf="hasChildren(item)" class="nav-group">
            <div class="nav-group-header">
              <i [class]="item.icon"></i>
              <span>{{ item.label | translate }}</span>
            </div>
            <div class="nav-group-items">
              <a *ngFor="let child of item.children"
                 [routerLink]="child.routerLink"
                 routerLinkActive="active"
                 [routerLinkActiveOptions]="{exact: true}"
                 [class]="'nav-item sub-item' + (child.cssClass ? ' ' + child.cssClass : '')"
                 (click)="closeSidebar()">
                <i [class]="child.icon"></i>
                <span>{{ child.label | translate }}</span>
                <span *ngIf="child.cssClass === 'coming-soon'" class="coming-soon-badge">Coming Soon</span>
              </a>
            </div>
          </div>
        </ng-container>
      </ng-container>

      <ng-template #loadingTemplate>
        <div class="sidebar-loading">
          <i class="pi pi-spin pi-spinner"></i>
          <span>{{ 'common.loading' | translate }}</span>
        </div>
      </ng-template>

      <!-- Logout Section -->
      <div class="sidebar-footer">
        <button (click)="logout(); closeSidebar()" class="logout-button">
          <i class="pi pi-sign-out"></i>
          <span>{{ 'nav.logout' | translate }}</span>
        </button>
      </div>
    </nav>
  </div>
</div>

